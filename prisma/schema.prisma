generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Projects {
  id            Int        @id @default(autoincrement())
  createdAt     DateTime   @default(now())
  updatedAt     DateTime   @updatedAt

  name          String     @db.VarChar(255) 
  description   String     @db.VarChar(255) 

  users         Users[]   
  tasks         Tasks[]
}

model Users {
  id            Int        @id @default(autoincrement())
  createdAt     DateTime   @default(now())
  updatedAt     DateTime   @updatedAt

  clerkId       String     @db.VarChar(255) @unique
  email         String     @db.VarChar(255) @unique
  
  projectId     Int        @unique
  project       Projects    @relation(fields: [projectId], references: [id])
  
  tasks         Tasks[]     @relation("UserTasks")
}


model Tasks {
  id            Int        @id @default(autoincrement())
  createdAt     DateTime   @default(now())
  updatedAt     DateTime   @updatedAt

  name          String     @db.VarChar(255)
  description   String     @db.VarChar(255)
  done          Boolean    @default(false)

  projectId     Int
  project       Projects    @relation(fields: [projectId], references: [id])

  users         Users[]     @relation("UserTasks")
}
